#!/usr/bin/env python3
"""Replace generic explanations for Q91-180 with detailed Arabic ones."""
import json, os, re

SD = os.path.dirname(os.path.abspath(__file__))

# Detailed explanations: qid -> list of explanation strings per option
D = {
91:["✅ صحيح! الذاكرة الافتراضية هي جزء من القرص الصلب يُستخدم كامتداد للذاكرة RAM.","❌ خاطئ. ROM ذاكرة قراءة فقط وليست ذاكرة افتراضية.","❌ خاطئ. ذاكرة التخزين المؤقت (Cache) جزء من المعالج.","❌ خاطئ. الذاكرة الافتراضية مفهوم برمجي وليست ميزة عتادية."],
92:["❌ خاطئ. الترحيل يقلل التجزئة الخارجية ولا يزيدها.","✅ صحيح! عيب الترحيل هو التخبط (Thrashing) عند التحميل الزائد.","❌ خاطئ. الترحيل لا يحتاج تخصيص متجاور.","❌ خاطئ. الترحيل لا يزيد وقت التنفيذ بشكل مباشر."],
93:["✅ صحيح! خطأ الصفحة يحدث عندما تحاول العملية الوصول لصفحة غير موجودة في الذاكرة الفيزيائية.","❌ خاطئ. نفاد الذاكرة مشكلة مختلفة عن خطأ الصفحة.","❌ خاطئ. التحميل الزائد للمعالج لا يسمى خطأ صفحة.","❌ خاطئ. فشل جدولة القرص مشكلة مختلفة."],
94:["❌ خاطئ. العملية لا تعود مباشرة للتنفيذ بل تنتظر في طابور الاستعداد.","✅ صحيح! بعد اكتمال خدمة I/O، تنتقل العملية لحالة الاستعداد (Ready).","❌ خاطئ. العملية كانت بالفعل في حالة الانتظار.","❌ خاطئ. العملية لم تنتهِ بل تحتاج استكمال التنفيذ."],
95:["✅ صحيح! حالة السباق (Race Condition) تحدث عندما تصل عدة عمليات لنفس البيانات بشكل متزامن والنتيجة تعتمد على ترتيب الوصول.","❌ خاطئ. أجزاء الذاكرة المشتركة آلية اتصال وليست المشكلة.","❌ خاطئ. قسم الدخول جزء من حل المشكلة وليس المشكلة.","❌ خاطئ. تزامن العمليات هو الحل وليس المشكلة."],
96:["❌ خاطئ. القسم الحرج مفهوم وليس أداة تزامن.","❌ خاطئ. الأنبوب (Pipe) أداة اتصال وليس تزامن.","✅ صحيح! الإشارة (Semaphore) أداة تزامن للتحكم في الوصول للموارد المشتركة.","❌ خاطئ. الجمود مشكلة وليس أداة تزامن."],
97:["❌ خاطئ. العنوان الفيزيائي هو عنوان الذاكرة الفعلي.","❌ خاطئ. العنوان المطلق مصطلح آخر للعنوان الفيزيائي.","✅ صحيح! العنوان المنطقي (Logical Address) هو ما ينشئه المعالج ويُحوّل لعنوان فيزيائي عبر MMU.","❌ خاطئ. الجواب الثالث هو الصحيح."],
98:["❌ جزئياً صحيح - الاستبعاد المتبادل شرط واحد فقط.","❌ جزئياً صحيح - التقدم شرط واحد فقط.","❌ جزئياً صحيح - الانتظار المحدود شرط واحد فقط.","✅ صحيح! المتطلبات هي: الاستبعاد المتبادل، التقدم، والانتظار المحدود."],
99:["❌ خاطئ. وجود دورة لا يعني بالضرورة وجود جمود إذا كانت الموارد متعددة النسخ.","✅ صحيح! العبارة خاطئة - وجود دورة شرط ضروري لكنه ليس كافياً دائماً."],
100:["❌ خاطئ. العبارة غير صحيحة.","✅ صحيح! العبارة خاطئة - التشغيل ثنائي الوضع يسمح لنظام التشغيل بحماية نفسه."],
101:["✅ صحيح! الخيط (Thread) هو وحدة تنفيذ خفيفة الوزن داخل العملية.","❌ خاطئ. وحدة تخزين الذاكرة ليست خيطاً.","❌ خاطئ. الخيط ليس مكوناً لنظام الملفات.","❌ خاطئ. الخيط ليس نوعاً من الذاكرة الافتراضية."],
102:["✅ صحيح! الخيوط المتعددة تتشارك نفس موارد العملية (الذاكرة، الملفات المفتوحة).","❌ خاطئ. الخيوط يمكن أن تعمل على نفس المعالج أو معالجات مختلفة.","❌ خاطئ. الخيوط تستطيع التواصل عبر الذاكرة المشتركة.","❌ خاطئ. الخيوط تتشارك نفس مساحة الذاكرة."],
103:["✅ صحيح! كلمات المرور (Passwords) هي أكثر طرق المصادقة شيوعاً.","❌ خاطئ. تجزئة الملفات مفهوم تخزين وليس مصادقة.","❌ خاطئ. التخبط مشكلة ذاكرة وليس طريقة مصادقة.","❌ خاطئ. الذاكرة الافتراضية تقنية إدارة ذاكرة."],
104:["✅ صحيح! قوائم التحكم في الوصول (ACL) تُحدد صلاحيات الوصول للملفات.","❌ خاطئ. ACL ليست لكشف الجمود.","❌ خاطئ. ACL ليست لجدولة العمليات.","❌ خاطئ. ACL ليست لإدارة الذاكرة."],
105:["❌ خاطئ. SJN تعاني من المجاعة وليس تأثير القافلة.","❌ خاطئ. Round Robin تعطي شرائح زمنية متساوية.","✅ صحيح! FCFS تعاني من تأثير القافلة عندما تحجز عملية طويلة المعالج.","❌ خاطئ. الجدولة متعددة المستويات لا تعاني من القافلة بنفس الطريقة."],
106:["❌ خاطئ. FCFS تنفذ حسب ترتيب الوصول.","✅ صحيح! SJN تنفذ العملية ذات أقصر وقت تنفيذ أولاً.","❌ خاطئ. Round Robin تعطي شرائح زمنية.","❌ خاطئ. Priority Scheduling تعتمد على الأولوية."],
107:["❌ خاطئ. FIFO بسيطة لكن قد تستبدل صفحات مهمة.","✅ صحيح! LRU تُستخدم في معظم أنظمة التشغيل الحديثة لأنها تقترب من الأداء المثالي.","❌ خاطئ. OPT مثالية نظرياً لكن صعبة التطبيق.","❌ خاطئ. Round Robin خوارزمية جدولة وليست استبدال صفحات."],
108:["✅ صحيح! الترحيل عند الطلب يحمّل الصفحات فقط عند الحاجة لتوفير الذاكرة.","❌ خاطئ. التخصيص المسبق عكس مفهوم الترحيل عند الطلب.","❌ خاطئ. تقليل حمل المعالج ليس هدف الترحيل عند الطلب.","❌ خاطئ. تخزين الملفات ليس وظيفة الترحيل عند الطلب."],
109:["❌ خاطئ. الكومة (Heap) تحتوي على الذاكرة المخصصة ديناميكياً.","❌ خاطئ. المكدس (Stack) يحتوي على المتغيرات المحلية.","✅ صحيح! قسم البيانات (Data Section) يحتوي على المتغيرات العامة.","❌ خاطئ. قسم النص (Text Section) يحتوي على كود البرنامج."],
110:["✅ صحيح! التبديل (Swapping) هو نسخ العملية من الذاكرة إلى القرص.","❌ خاطئ. الجمود مشكلة تزامن وليس عملية نقل.","❌ خاطئ. الترحيل عند الطلب يحمّل صفحات محددة وليس عمليات كاملة.","❌ خاطئ. خطأ الصفحة حدث وليس عملية نقل."],
111:["❌ خاطئ. النواة تبقى في الذاكرة طوال الجلسة.","✅ صحيح! العبارة خاطئة - في الأنظمة الحديثة النواة تتكون من وحدات قابلة للتحميل.","❌ خاطئ. النواة أول جزء يُحمّل أثناء الإقلاع.","❌ خاطئ. النواة هي النواة المركزية لنظام التشغيل."],
112:["✅ صحيح! PCB بنية بيانات تخزن معلومات العملية مثل المعرف والحالة والسجلات.","❌ خاطئ. PCB ليست آلية للتحكم بأجهزة I/O.","❌ خاطئ. PCB ليست ميزة أمان.","❌ خاطئ. PCB ليست نظام إدارة ملفات."],
113:["✅ صحيح! الذاكرة الافتراضية توفر ذاكرة إضافية باستخدام مساحة القرص.","❌ خاطئ. إعدادات العتاد تُخزن في BIOS/UEFI.","❌ خاطئ. تحسين الواجهة ليس من وظائف الذاكرة الافتراضية.","❌ خاطئ. إدارة الشبكة من وظائف نظام الشبكات."],
114:["✅ صحيح! كل خيط يحتاج مكدس منفصل لتتبع استدعاءات الدوال.","❌ خاطئ. العبارة صحيحة - المكدسات المنفصلة ضرورية."],
115:["✅ صحيح! النواة (Kernel) تعمل في جميع الأوقات على الحاسوب.","❌ خاطئ. العبارة صحيحة - النواة تعمل باستمرار منذ الإقلاع."],
116:["❌ خاطئ. الترحيل يحل التجزئة الداخلية.","❌ خاطئ. التقسيم قد يزيد التجزئة الخارجية.","✅ صحيح! الضغط (Compaction) يحل التجزئة الخارجية بتجميع المساحات الفارغة.","❌ خاطئ. التبديل ينقل عمليات كاملة ولا يحل التجزئة."],
117:["❌ خاطئ. إدارة التخصيص الديناميكي من وظائف مدير الذاكرة.","❌ خاطئ. خوارزميات استبدال الصفحات لا تزيد سرعة المعالج.","✅ صحيح! الهدف هو تقليل أخطاء الصفحات باختيار أفضل صفحة للاستبدال.","❌ خاطئ. الصفحات في الذاكرة مؤقتة وليست دائمة."],
118:["❌ خاطئ. FIFO بسيطة لكنها ليست مثالية.","❌ خاطئ. LRU جيدة لكنها ليست مثالية نظرياً.","✅ صحيح! OPT تستبدل الصفحة التي لن تُستخدم لأطول فترة - مثالية نظرياً.","❌ خاطئ. LFU ليست مثالية."],
119:["✅ صحيح! جدول الصفحات يربط بين العناوين المنطقية والفيزيائية.","❌ خاطئ. معلومات التحكم بالعمليات مخزنة في PCB.","❌ خاطئ. تخصيص موارد المعالج من وظائف المجدول.","❌ خاطئ. إدارة عمليات I/O من وظائف مدير الإدخال/الإخراج."],
120:["✅ صحيح! التخبط يحدث عندما تقضي العملية وقتاً في تبديل الصفحات أكثر من التنفيذ.","❌ خاطئ. عدم كفاءة جدولة المعالج مشكلة أخرى.","❌ خاطئ. كثرة العمليات قد تسبب التخبط لكنها ليست التعريف.","❌ خاطئ. نفاد مساحة القرص مشكلة مختلفة."],
121:["✅ صحيح! TLB ذاكرة تخزين مؤقت سريعة لتسريع ترجمة العناوين.","❌ خاطئ. TLB ليس جهاز تخزين ثانوي.","❌ خاطئ. TLB ليس مكوناً لنظام الملفات.","❌ خاطئ. TLB ليس خوارزمية جدولة أقراص."],
122:["✅ صحيح! نظام الملفات مسؤول عن إدارة الملفات والأدلة وتنظيمها.","❌ خاطئ. التحكم بجدولة المعالج من وظائف المجدول.","❌ خاطئ. التخصيص الديناميكي للذاكرة من وظائف مدير الذاكرة.","❌ خاطئ. التعامل مع تزامن العمليات من وظائف نظام التزامن."],
123:["❌ خاطئ. التصيد (Phishing) خداع للحصول على معلومات.","✅ صحيح! الانتحال (Spoofing) يتضمن التظاهر بأنك مستخدم آخر.","❌ خاطئ. هجوم DDoS يُغرق الخادم بالطلبات.","❌ خاطئ. هجوم التجزئة يستغل تجزئة الحزم."],
124:["❌ خاطئ. اسم الملف خاصية أساسية للملف.","❌ خاطئ. حجم الملف خاصية أساسية.","✅ صحيح! أولوية جدولة المعالج خاصية للعملية وليست خاصية للملف.","❌ خاطئ. صلاحيات الملف خاصية أساسية."],
125:["❌ خاطئ. إدارة الملفات خدمة مختلفة.","✅ صحيح! تنفيذ البرامج (Program Execution) تسمح للمستخدم بتنفيذ برنامج.","❌ خاطئ. الأمان خدمة حماية.","❌ خاطئ. عمليات I/O خدمة إدخال/إخراج."],
126:["❌ خاطئ. إدارة العمليات تتعامل مع العمليات.","❌ خاطئ. إدارة الذاكرة تتعامل مع تخصيص الذاكرة.","✅ صحيح! خدمة عمليات I/O مسؤولة عن الإدخال والإخراج.","❌ خاطئ. إدارة نظام الملفات تتعامل مع الملفات."],
127:["❌ خاطئ. إدارة الملفات تنظم الملفات.","✅ صحيح! خدمة الأمان (Security) تحمي من الوصول غير المصرح به.","❌ خاطئ. جدولة العمليات تدير تنفيذ العمليات.","❌ خاطئ. منع الجمود يتعامل مع مشاكل الموارد."],
128:["❌ خاطئ. التحكم بالعمليات يدير العمليات.","✅ صحيح! إدارة الملفات (File Management) تتتبع ملفات النظام والمستخدم.","❌ خاطئ. إدارة الذاكرة تتعامل مع تخصيص الذاكرة.","❌ خاطئ. عمليات I/O تتعامل مع الأجهزة."],
129:["✅ صحيح! خدمة التعامل مع الجمود (Deadlock Handling) مسؤولة عن منع وحل الجمود.","❌ خاطئ. جدولة العمليات تدير تنفيذ العمليات.","❌ خاطئ. تخصيص الذاكرة يدير الذاكرة.","❌ خاطئ. إدارة الملفات تنظم الملفات."],
130:["✅ صحيح! مشاركة الملفات (File Sharing) تسمح لعدة مستخدمين بالوصول للملفات.","❌ خاطئ. إدارة I/O تتعامل مع الأجهزة.","❌ خاطئ. الذاكرة الافتراضية تقنية إدارة ذاكرة.","❌ خاطئ. جدولة المهام تدير العمليات."],
131:["✅ صحيح! المترجم (Compiler) يحول الكود المصدري إلى كود الآلة.","❌ خاطئ. الرابط (Linker) يربط الملفات المترجمة.","❌ خاطئ. المحمّل (Loader) يحمّل البرنامج للذاكرة.","❌ خاطئ. المفسر (Interpreter) ينفذ سطراً بسطر."],
132:["❌ خاطئ. جدولة I/O تدير عمليات الإدخال/الإخراج.","✅ صحيح! جدولة العمليات (Process Scheduling) هي تخصيص وقت المعالج.","❌ خاطئ. ترحيل الذاكرة تقنية إدارة ذاكرة.","❌ خاطئ. منع الجمود يتعامل مع مشاكل الموارد."],
133:["❌ خاطئ. إدارة الملفات تنظم الملفات على القرص.","✅ صحيح! تزامن العمليات (Process Synchronization) يتعامل مع IPC.","❌ خاطئ. الشبكات تتعامل مع اتصالات الشبكة.","❌ خاطئ. تنفيذ البرامج يشغل البرامج."],
134:["❌ خاطئ. إدارة الذاكرة من وظائف مدير الذاكرة.","✅ صحيح! الدور الرئيسي لمفسر الأوامر هو تنفيذ أوامر المستخدم.","❌ خاطئ. تخصيص مساحة القرص من وظائف نظام الملفات.","❌ خاطئ. معالجة طلبات الشبكة من وظائف نظام الشبكات."],
135:["❌ خاطئ. إدارة الملفات تنظم الملفات.","❌ خاطئ. إدارة الذاكرة تخصص الذاكرة.","✅ صحيح! محمّل البرنامج (Program Loader) يحمّل البرنامج في الذاكرة للتنفيذ.","❌ خاطئ. إدارة الأجهزة تتحكم بالعتاد."],
136:["❌ خاطئ. إدارة الذاكرة تدير تخصيص الذاكرة.","✅ صحيح! نظام معالجة المقاطعات مسؤول عن التعامل مع المقاطعات.","❌ خاطئ. جدولة المعالج تدير تنفيذ العمليات.","❌ خاطئ. إدارة نظام الملفات تنظم الملفات."],
137:["❌ خاطئ. تشغيل العمليات على عدة معالجات من وظائف المعالجة المتوازية.","✅ صحيح! الذاكرة الافتراضية تحاكي ذاكرة أكبر من الذاكرة الفيزيائية.","❌ خاطئ. جدولة العمليات من وظائف المجدول.","❌ خاطئ. توفير واجهة رسومية من وظائف واجهة المستخدم."],
138:["❌ خاطئ. تخصيص وقت المعالج من وظائف المجدول.","✅ صحيح! إدارة I/O مسؤولة عن إدارة اتصالات الأجهزة ونقل البيانات.","❌ خاطئ. تنظيم الملفات من وظائف نظام الملفات.","❌ خاطئ. معالجة صفحات الذاكرة الافتراضية من وظائف مدير الذاكرة."],
139:["✅ صحيح! إدارة الملفات تشمل التحكم بالوصول وتخزين الملفات وبنية الأدلة.","❌ خاطئ. جدولة العمليات وتخصيص الذاكرة وظائف مختلفة.","❌ خاطئ. إدارة الذاكرة الافتراضية وظيفة مختلفة.","❌ خاطئ. التخزين المؤقت والترحيل وظائف مختلفة."],
140:["❌ خاطئ. إدارة الأجهزة تتحكم بالعتاد.","❌ خاطئ. إدارة الملفات تنظم الملفات.","❌ خاطئ. إدارة العمليات تدير العمليات.","✅ صحيح! معالجة الأخطاء (Error Handling) مسؤولة عن كشف وإدارة الأخطاء."],
141:["❌ خاطئ. معالجة المقاطعات جزء من خدمات النواة.","✅ صحيح! خدمات النواة مطلوبة للتعامل مع استدعاءات النظام.","❌ خاطئ. تخصيص الذاكرة خدمة محددة.","❌ خاطئ. التعامل مع الملفات خدمة محددة."],
142:["❌ خاطئ. إدارة الذاكرة تتعامل مع الذاكرة فقط.","✅ صحيح! تخصيص الموارد (Resource Allocation) يدير تخصيص جميع الموارد.","❌ خاطئ. إدارة العمليات تدير دورة حياة العمليات.","❌ خاطئ. إدارة الأجهزة تتحكم بالعتاد."],
143:["❌ خاطئ. جدولة العمليات تحدد أي عملية تُنفذ.","✅ صحيح! حماية الذاكرة تضمن عدم تجاوز أي عملية لمواردها.","❌ خاطئ. إدارة الملفات تنظم الملفات.","❌ خاطئ. منع الجمود يتعامل مع مشاكل الموارد."],
144:["✅ صحيح! إدارة واجهة المستخدم توفر واجهة سهلة الاستخدام.","❌ خاطئ. إدارة الملفات تنظم الملفات.","❌ خاطئ. إدارة الشبكة تدير الاتصالات.","❌ خاطئ. تزامن العمليات يتعامل مع التنسيق بين العمليات."],
145:["❌ خاطئ. تخصيص الموارد يوزع الموارد.","✅ صحيح! المحاسبة (Accounting) تتتبع موارد النظام مثل استخدام المعالج.","❌ خاطئ. إدارة الملفات تنظم الملفات.","❌ خاطئ. جدولة العمليات تدير التنفيذ."],
146:["❌ خاطئ. تخصيص وقت المعالج من وظائف المجدول.","✅ صحيح! خدمة الأمان مسؤولة عن حماية النظام والبيانات.","❌ خاطئ. جدولة تنفيذ البرامج من وظائف المجدول.","❌ خاطئ. إدارة أجهزة I/O من وظائف مدير الأجهزة."],
147:["❌ خاطئ. إدارة موارد العتاد وظيفة أساسية.","❌ خاطئ. توفير واجهة المستخدم وظيفة أساسية.","❌ خاطئ. تنفيذ برامج المستخدم وظيفة أساسية.","✅ صحيح! ترجمة البرامج (Compiling) ليست وظيفة نظام التشغيل بل المترجم."],
148:["✅ صحيح! المحاسبة (Accounting) تحتفظ بسجلات مفصلة لاستخدام النظام.","❌ خاطئ. التسجيل قريب لكن المحاسبة أدق.","❌ خاطئ. الأمان يحمي النظام من التهديدات.","❌ خاطئ. إدارة الملفات تنظم الملفات."],
149:["❌ خاطئ. إدارة العمليات خدمة فعلية.","❌ خاطئ. إدارة الذاكرة خدمة فعلية.","✅ صحيح! تصفح الشبكة (Network Browsing) ليست خدمة نظام تشغيل بل تطبيق مستخدم.","❌ خاطئ. إدارة نظام الملفات خدمة فعلية."],
150:["✅ صحيح! الرابط الصلب (Hard Link) يشير مباشرة لـ inode الملف.","❌ خاطئ. الرابط الصلب لا ينشئ نسخة بل يشير لنفس البيانات.","❌ خاطئ. البيانات الوصفية مخزنة في الـ inode.","❌ خاطئ. الرابط الصلب للملفات المحلية وليس الشبكة."],
151:["✅ صحيح! مزامنة الخيوط تُستخدم لإدارة العمليات المتزامنة بفعالية.","❌ خاطئ. الذاكرة الافتراضية تقنية إدارة ذاكرة.","❌ خاطئ. التخزين المؤقت لـ I/O تقنية مختلفة.","❌ خاطئ. كشف الجمود جزء من الحل وليس الإدارة الكاملة."],
152:["✅ صحيح! إدارة الأجهزة تدير اتصالات العتاد والتحكم بالأجهزة.","❌ خاطئ. إدارة الملفات تنظم الملفات.","❌ خاطئ. تخصيص الذاكرة يدير الذاكرة.","❌ خاطئ. جدولة المعالج تدير العمليات."],
153:["✅ صحيح! الذاكرة الافتراضية هي عملية تبادل البيانات بين RAM والقرص.","❌ خاطئ. إدارة الملفات تنظم الملفات.","❌ خاطئ. جدولة I/O تدير عمليات الإدخال/الإخراج.","❌ خاطئ. منع الجمود يتعامل مع مشاكل الموارد."],
154:["✅ صحيح! إدارة نظام الملفات تُستخدم لتنظيم الملفات في أدلة.","❌ خاطئ. جدولة العمليات تدير التنفيذ.","❌ خاطئ. التخزين المؤقت لـ I/O تقنية مختلفة.","❌ خاطئ. ترحيل الذاكرة تقنية إدارة ذاكرة."],
155:["❌ خاطئ. GUI واجهة رسومية تستخدم الفأرة والأيقونات.","✅ صحيح! واجهة سطر الأوامر (CLI) تسمح بكتابة أوامر نصية.","❌ خاطئ. مجدول العمليات يعمل في الخلفية.","❌ خاطئ. مدير الملفات تطبيق وليس واجهة أوامر."],
156:["✅ صحيح! تنفيذ البرامج يدير تنفيذ البرامج على مستوى النظام.","❌ خاطئ. تخصيص موارد النظام خدمة مختلفة.","❌ خاطئ. إدارة الشبكة تتعامل مع الاتصالات.","❌ خاطئ. الأمان يحمي النظام."],
157:["✅ صحيح! جدولة العمليات تضمن تشغيل النظام بكفاءة مع عدة برامج.","❌ خاطئ. إدارة الذاكرة تخصص الذاكرة.","❌ خاطئ. الذاكرة الافتراضية توسع الذاكرة.","❌ خاطئ. إدارة الأجهزة تتحكم بالعتاد."],
158:["❌ خاطئ. إدارة موارد المعالج من وظائف المجدول.","✅ صحيح! إدارة الشبكة مسؤولة عن التحكم بالوصول للموارد المتصلة.","❌ خاطئ. تخزين واسترجاع الملفات من وظائف نظام الملفات.","❌ خاطئ. معالجة المقاطعات من وظائف معالج المقاطعات."],
159:["❌ خاطئ. إدارة العمليات تدير العمليات.","❌ خاطئ. إدارة الملفات تنظم الملفات.","✅ صحيح! خدمة الأمان مسؤولة عن سجلات النظام ومسارات التدقيق.","❌ خاطئ. المحاسبة تتتبع استخدام الموارد."],
160:["❌ خاطئ. إدارة I/O تتعامل مع الأجهزة.","✅ صحيح! إدارة الذاكرة مسؤولة عن تخصيص المساحة وإدارة التسلسل الهرمي.","❌ خاطئ. إدارة العمليات تدير العمليات.","❌ خاطئ. إدارة الملفات تنظم الملفات."],
161:["✅ صحيح! الخيوط ضمن نفس العملية تتشارك نفس مساحة الذاكرة والموارد.","❌ خاطئ. الخيوط تتشارك الذاكرة ولا تملك مساحات منفصلة.","❌ خاطئ. الخيوط تستطيع التواصل عبر الذاكرة المشتركة.","❌ خاطئ. الخيوط يمكن أن تعمل على نفس المعالج أيضاً."],
162:["❌ خاطئ. حماية الذاكرة تمنع وصول العمليات لذاكرة بعضها.","✅ صحيح! تزامن العمليات يمنع تداخل أنشطة المستخدمين المتعددين.","❌ خاطئ. منع الجمود يتعامل مع الموارد المقفلة.","❌ خاطئ. الذاكرة الافتراضية تقنية إدارة ذاكرة."],
163:["✅ صحيح! الغرض الأساسي من التزامن هو منع العمليات/الخيوط من التداخل.","❌ خاطئ. التزامن لا يزيد عدد الخيوط بل ينظم تنفيذها.","❌ خاطئ. وصف جزئي - منع الأخطاء أهم.","❌ خاطئ. تخصيص الموارد بطريقة Round Robin ليس هدف التزامن."],
164:["✅ صحيح! تعدد الخيوط يحسن استخدام الموارد بمشاركتها بين عدة خيوط.","❌ خاطئ. الخيوط تتشارك الذاكرة فلا تزيد متطلباتها.","❌ خاطئ. تعدد الخيوط يزيد تعقيد الجدولة.","❌ خاطئ. التزامن قد يُبطئ التنفيذ لكنه ضروري."],
165:["✅ صحيح! تجمع الخيوط مجموعة خيوط جاهزة مسبقاً لتنفيذ المهام.","❌ خاطئ. تجمع الخيوط ليس موارد لخيط واحد.","❌ خاطئ. تجمع الخيوط ليس آلية للتحكم بالجمود.","❌ خاطئ. تجمع الخيوط لا يزيد عدد الخيوط بل يعيد استخدامها."],
166:["✅ صحيح! كثرة الخيوط تزيد الحمل بسبب تبديل السياق والتزامن.","❌ خاطئ. كثرة الخيوط لا تعني استخدام ذاكرة أكفأ.","❌ خاطئ. بعد حد معين، كثرة الخيوط تقلل الأداء.","❌ خاطئ. كثرة الخيوط تزيد تعقيد الإدارة."],
167:["✅ صحيح! join() تجعل الخيط المُستدعي ينتظر حتى اكتمال خيط آخر.","❌ خاطئ. start() هي التي تبدأ تنفيذ الخيط.","❌ خاطئ. join() لا تُنهي الخيط بل تنتظره.","❌ خاطئ. سلامة الوصول المشترك من وظائف أدوات التزامن مثل mutex."],
168:["✅ صحيح! التوازي يعني تنفيذ عدة خيوط فعلياً في نفس الوقت على معالجات متعددة.","❌ خاطئ. التوازي يختلف عن التزامن.","❌ خاطئ. التوازي يحتاج معالجات متعددة النوى.","❌ خاطئ. التوازي لا يلغي الحاجة للتزامن."],
169:["❌ خاطئ. Round Robin تعطي وقتاً متساوياً بدون أولويات.","✅ صحيح! جدولة الأولوية تعطي الأولوية بناءً على أهميتها ومواعيدها.","❌ خاطئ. FCFS تنفذ حسب الترتيب بدون أولويات.","❌ خاطئ. SJF تعتمد على الوقت وليس الأهمية."],
170:["❌ خاطئ. تعدد الخيوط لا يقلل استهلاك الذاكرة بشكل مباشر.","✅ صحيح! تعدد الخيوط يحسن استغلال المعالج بتنفيذ عدة خيوط.","❌ خاطئ. تعدد الخيوط لا يزيد استخدام القرص.","❌ خاطئ. تعدد الخيوط يزيد تعقيد الإدارة."],
171:["❌ خاطئ. التبديل بين مهام مختلفة وصف عام.","✅ صحيح! تبديل السياق هو حفظ حالة خيط واستعادة حالة خيط آخر.","❌ خاطئ. نقل التنفيذ بين معالجات مفهوم مختلف.","❌ خاطئ. تعيين أولويات جديدة ليس تبديل سياق."],
172:["❌ خاطئ. الخيوط تتشارك الموارد بسهولة فعلاً.","✅ صحيح! عيب الخيوط هو زيادة التعقيد بسبب التزامن وتكلفة تبديل السياق.","❌ خاطئ. الخيوط تستطيع مشاركة البيانات.","❌ خاطئ. الخيوط تستطيع التنفيذ بشكل متزامن."],
173:["✅ صحيح! الدور الأساسي لنظام التشغيل هو إدارة موارد العتاد والبرمجيات.","❌ خاطئ. توفير الترفيه ليس من أدوار نظام التشغيل.","❌ خاطئ. مضاد الفيروسات برنامج منفصل.","❌ خاطئ. تحسين سرعة الإنترنت ليس من وظائف نظام التشغيل."],
174:["❌ خاطئ. Windows 10 يدعم مستخدماً واحداً بشكل أساسي.","✅ صحيح! Linux نظام متعدد المستخدمين.","❌ خاطئ. MS-DOS نظام مستخدم واحد.","❌ خاطئ. macOS يدعم مستخدماً واحداً بشكل أساسي."],
175:["✅ صحيح! النواة هي الجزء الأساسي من نظام التشغيل الذي يدير موارد النظام.","❌ خاطئ. النواة ليست وحدة تخزين مؤقتة.","❌ خاطئ. النواة ليست برنامج ألعاب.","❌ خاطئ. النواة ليست أداة إدارة أقراص."],
176:["❌ خاطئ. Real-Time OS يوفر طبقة تجريد فوق العتاد.","❌ خاطئ. Network OS يوفر خدمات شبكية.","❌ خاطئ. Embedded OS يوفر واجهة محدودة.","✅ صحيح! Bare-metal OS يسمح بالتفاعل مباشرة مع العتاد."],
177:["❌ خاطئ. مدير الملفات ينظم الملفات.","❌ خاطئ. مدير الذاكرة يدير تخصيص الذاكرة.","✅ صحيح! مجدول المعالج (CPU Scheduler) مسؤول عن جدولة العمليات.","❌ خاطئ. برنامج التعريف يتحكم بجهاز معين."],
178:["❌ خاطئ. تخصيص الذاكرة من وظائف مدير الذاكرة.","❌ خاطئ. جدولة العمليات من وظائف المجدول.","✅ صحيح! إدارة الأجهزة مسؤولة عن التحكم بأجهزة العتاد وعمليات I/O.","❌ خاطئ. تتبع الملفات من وظائف نظام الملفات."],
179:["✅ صحيح! المعالجة متعددة النوى تسمح بتشغيل عدة خيوط على نوى مختلفة بشكل متزامن.","❌ خاطئ. الخيوط يمكنها العمل على عدة نوى.","❌ خاطئ. لا تقلل عدد الخيوط.","❌ خاطئ. لا تمنع الوصول للذاكرة المشتركة."],
180:["✅ صحيح! متصفح الويب يحمّل عدة صفحات بشكل متزامن باستخدام خيوط متعددة.","❌ خاطئ. محرر نصوص يعدل ملفاً واحداً ليس متعدد الخيوط.","❌ خاطئ. DBMS بدون استعلامات متوازية ليس مثالاً.","❌ خاطئ. مترجم ينفذ ملفاً واحداً بالتتابع ليس متعدد الخيوط."],
}

# Load questions
with open(os.path.join(SD, 'questions.json'), 'r', encoding='utf-8') as f:
    qs = json.load(f)

# Read HTML
with open(os.path.join(SD, 'os_quiz.html'), 'r', encoding='utf-8') as f:
    content = f.read()

count = 0
for qid in range(91, 181):
    exps = D.get(qid)
    if not exps:
        continue
    q = next((x for x in qs if x['id'] == qid), None)
    if not q:
        continue

    # Find the correct option index and text
    ci = next((i for i, o in enumerate(q['options']) if o['correct']), 0)
    ct = q['options'][ci]['text']

    # Build the OLD generic explanation entries
    old_items = []
    for i, o in enumerate(q['options']):
        if o['correct']:
            old_items.append('"✅ <b>صحيح.</b> هذا هو الجواب الصحيح حسب بنك الأسئلة."')
        else:
            t = ct.replace('"', '\\"')
            old_items.append(f'"❌ <b>خاطئ.</b> الجواب الصحيح هو: {t}"')

    # Build old string: e.g. 91: [\n  "...",\n  "...",\n]
    # But we need to match the exact format in the file. Let's use regex.
    # The format in the file is like:
    #   91: [
    #     "✅ <b>صحيح.</b> ...",
    #     "❌ <b>خاطئ.</b> ...",
    #   ],
    
    # Use regex to find the block for this question ID
    pattern = rf'(\s+){qid}: \[\s*\n((?:\s+"[^"]*",?\s*\n)+)\s+\]'
    match = re.search(pattern, content)
    if not match:
        # Try alternate pattern without trailing comma issues
        pattern2 = rf'{qid}: \[([^\]]*)\]'
        match2 = re.search(pattern2, content)
        if not match2:
            print(f"  Q{qid}: pattern not found")
            continue
        # Replace the whole block
        indent = "          "  # typical indentation
        new_items_str = ",\n".join([f'{indent}  "{e}"' for e in exps])
        new_block = f"{qid}: [\n{new_items_str},\n{indent}]"
        old_block = match2.group(0)
        content = content.replace(old_block, new_block, 1)
        count += 1
    else:
        indent = match.group(1)
        new_items_str = ",\n".join([f'{indent}  "{e}"' for e in exps])
        new_block = f"{indent}{qid}: [\n{new_items_str},\n{indent}]"
        old_block = match.group(0)
        content = content.replace(old_block, new_block, 1)
        count += 1

# Write back
with open(os.path.join(SD, 'os_quiz.html'), 'w', encoding='utf-8') as f:
    f.write(content)

print(f"Updated {count} questions with detailed explanations (91-180)")
